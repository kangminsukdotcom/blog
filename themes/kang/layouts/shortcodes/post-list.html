{{ $pages := where site.RegularPages "Type" "posts" }}
{{ $grouped := $pages.GroupByDate "2006" }}

<ul class="blog-posts">
  {{ range $grouped }}
    <h3>{{ .Key }}</h3>
    {{ range .Pages }}
      <li>
        {{ if .Params.link }}
          <a href="{{ .Params.link }}" target="_blank">{{ .Title }} â†ª</a>
        {{ else }}
          <a href="{{ .RelPermalink }}">{{ .Title }}</a>
        {{ end }}
      </li>
    {{ end }}
  {{ end }}
</ul>
